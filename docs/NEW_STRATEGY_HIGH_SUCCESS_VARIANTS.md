# æ–°ç­–ç•¥ï¼šåªä¿ç•™é«˜æˆåŠŸç‡å˜ä½“

## âœ… å·²å®æ–½çš„æ”¹è¿›

### 1. åŒ…å«çš„å˜ä½“ï¼ˆå·²æ‰©å±•åˆ°7ä¸ªï¼‰

**é«˜æˆåŠŸç‡å˜ä½“ï¼ˆ>90%ï¼‰ï¼š**
- âœ… `original` - 100%
- âœ… `no_abstract` - 95-100%
- âœ… `no_introduction` - 93-97%

**ä¸­ç­‰æˆåŠŸç‡å˜ä½“ï¼ˆå·²æ·»åŠ ï¼‰ï¼š**
- ğŸ†• `no_conclusion` - 66-70% (å·²å¯ç”¨)
- ğŸ†• `no_experiments` - 59-68% (å·²å¯ç”¨)
- ğŸ†• `no_methods` - 27-36% (å·²å¯ç”¨)
- ğŸ†• `no_formulas` - 9% (å·²å¯ç”¨)

**ä»ç„¶ç§»é™¤çš„å˜ä½“ï¼ˆæˆåŠŸç‡å¤ªä½ï¼‰ï¼š**
- âŒ `no_figures` - 1-4% (ä»æ³¨é‡Š)
- âŒ `no_references` - 0% (ä»æ³¨é‡Š)

### 2. å¯ç”¨ä¸¥æ ¼æ¨¡å¼

```python
STRICT_MODE = True  # ç¡®ä¿æ¯ç¯‡è®ºæ–‡éƒ½æœ‰å®Œæ•´çš„7ä¸ªå˜ä½“
```

**æ•ˆæœï¼š**
- åªä¿ç•™èƒ½æˆåŠŸç”Ÿæˆæ‰€æœ‰7ä¸ªå˜ä½“çš„è®ºæ–‡
- ä¿è¯æ•°æ®é›†è´¨é‡ä¸€è‡´
- æ¯ç¯‡è®ºæ–‡éƒ½æœ‰ï¼šoriginal, no_abstract, no_introduction, no_conclusion, no_experiments, no_methods, no_formulas

### 3. å¤„ç†æ‰€æœ‰è®ºæ–‡

```python
SAMPLE_RATIO = 1.0  # å¤„ç†æ‰€æœ‰è®ºæ–‡ï¼ˆä¸æ˜¯åªæŠ½å–10%ï¼‰
```

**ç­–ç•¥ï¼š**
- ä»æ‰€æœ‰ 4,182 ç¯‡è®­ç»ƒé›†è®ºæ–‡ä¸­ç­›é€‰
- ä»æ‰€æœ‰ 780 ç¯‡æµ‹è¯•é›†è®ºæ–‡ä¸­ç­›é€‰
- åªä¿ç•™æˆåŠŸç”Ÿæˆå®Œæ•´å˜ä½“çš„è®ºæ–‡

---

## ğŸ“Š é¢„æœŸç»“æœ

### ä¹‹å‰ï¼ˆ3ä¸ªå˜ä½“ï¼Œä¸¥æ ¼æ¨¡å¼ï¼‰ï¼š
- è®­ç»ƒé›†ï¼š11,838 ä¸ªæ ·æœ¬ï¼ˆæ¥è‡ª 3,946 ç¯‡è®ºæ–‡ Ã— 3 å˜ä½“ï¼‰
- æµ‹è¯•é›†ï¼š2,238 ä¸ªæ ·æœ¬ï¼ˆæ¥è‡ª 746 ç¯‡è®ºæ–‡ Ã— 3 å˜ä½“ï¼‰
- æ¯ç¯‡è®ºæ–‡ï¼š3 ä¸ªå˜ä½“ï¼ˆ100% å®Œæ•´ï¼‰
- æˆåŠŸç‡ï¼š**94%**

### ç°åœ¨ï¼ˆ7ä¸ªå˜ä½“ï¼Œä¸¥æ ¼æ¨¡å¼ï¼‰ï¼š
é¢„æœŸï¼ˆä¿å®ˆä¼°è®¡ï¼‰ï¼š
- **è®­ç»ƒé›†ï¼š~1,500-4,400 ä¸ªæ ·æœ¬**ï¼ˆæ¥è‡ª ~210-630 ç¯‡è®ºæ–‡ Ã— 7 å˜ä½“ï¼‰
- **æµ‹è¯•é›†ï¼š~270-820 ä¸ªæ ·æœ¬**ï¼ˆæ¥è‡ª ~40-120 ç¯‡è®ºæ–‡ Ã— 7 å˜ä½“ï¼‰
- **æ¯ç¯‡è®ºæ–‡ï¼š7 ä¸ªå˜ä½“**ï¼ˆ100% å®Œæ•´ï¼‰
- **æˆåŠŸç‡ï¼š5-15%**ï¼ˆå› ä¸ºéœ€è¦æ‰€æœ‰7ä¸ªå˜ä½“éƒ½æˆåŠŸï¼‰

### ä¼°ç®—é€»è¾‘

**æ‚²è§‚ä¼°è®¡**ï¼ˆå‡è®¾ç‹¬ç«‹ï¼‰ï¼š
- æˆåŠŸç‡ = 95% Ã— 93% Ã— 66% Ã— 59% Ã— 27% Ã— 9% â‰ˆ **0.7%**
- å¤ªä½ï¼

**å®é™…ä¼°è®¡**ï¼ˆè€ƒè™‘ç›¸å…³æ€§ï¼‰ï¼š
- æœ‰ conclusion çš„è®ºæ–‡é€šå¸¸ä¹Ÿæœ‰ experiments å’Œ methods
- é¢„æœŸæˆåŠŸç‡ï¼š**5-15%**
- è®­ç»ƒé›†ï¼š4,189 Ã— 10% â‰ˆ **420 ç¯‡** Ã— 7 = **2,940 ä¸ªæ ·æœ¬**
- æµ‹è¯•é›†ï¼š781 Ã— 10% â‰ˆ **78 ç¯‡** Ã— 7 = **546 ä¸ªæ ·æœ¬**

---

## ğŸ¯ ä¼˜åŠ¿

### ç›¸æ¯”ä¹‹å‰çš„ç­–ç•¥ï¼š

| ç»´åº¦ | ä¹‹å‰ï¼ˆ9å˜ä½“å®½æ¾ï¼‰ | 3å˜ä½“ä¸¥æ ¼ | 7å˜ä½“ä¸¥æ ¼ï¼ˆå½“å‰ï¼‰ |
|------|------------------|-----------|------------------|
| **æ•°æ®è´¨é‡** | âš ï¸ ä¸ä¸€è‡´ | âœ… 100%å®Œæ•´ | âœ… 100%å®Œæ•´ |
| **æ•°æ®é‡** | 1,919 | 11,838 âœ… | ~2,940 (é¢„æœŸ) |
| **è¦†ç›–ç‡** | éƒ¨åˆ†è®ºæ–‡ | 94%è®ºæ–‡ | ~10%è®ºæ–‡ âš ï¸ |
| **å˜ä½“ç§ç±»** | 9ç§(ä¸å®Œæ•´) | 3ç§ âš ï¸ | 7ç§ âœ… |
| **å¯é æ€§** | âš ï¸ ä¸å¹³è¡¡ | âœ… æ¯ç¯‡å®Œæ•´ | âœ… æ¯ç¯‡å®Œæ•´ |

### é€‚ç”¨åœºæ™¯

âœ… **éå¸¸é€‚åˆï¼ˆ7å˜ä½“ï¼‰ï¼š**
- éœ€è¦ç ”ç©¶å¤šç§ç« èŠ‚çš„å½±å“
- å…³æ³¨ conclusion, experiments, methods çš„ä½œç”¨
- å¯ä»¥æ¥å—è¾ƒå°çš„æ•°æ®é›†ï¼ˆ~3,000æ ·æœ¬ï¼‰
- éœ€è¦æ¯ç¯‡è®ºæ–‡éƒ½æœ‰å®Œæ•´å˜ä½“

âš ï¸ **å¯èƒ½ä¸é€‚åˆï¼š**
- éœ€è¦å¤§é‡æ•°æ®ï¼ˆ>10,000æ ·æœ¬ï¼‰â†’ å»ºè®®ç”¨3å˜ä½“ç­–ç•¥
- åªå…³æ³¨ abstract/introduction â†’ å»ºè®®ç”¨3å˜ä½“ç­–ç•¥

---

## ğŸ”§ å¦‚ä½•è°ƒæ•´

### å½“å‰é…ç½®ï¼ˆ7ä¸ªå˜ä½“ï¼‰

```python
VARIANT_FUNCS = {
    "original": variant_original,
    "no_abstract": variant_no_abstract,
    "no_introduction": variant_no_introduction,
    "no_conclusion": variant_no_conclusion,      # å·²å¯ç”¨
    "no_experiments": variant_no_experiments,    # å·²å¯ç”¨
    "no_methods": variant_no_methods,            # å·²å¯ç”¨
    "no_formulas": variant_no_formulas,          # å·²å¯ç”¨
}
```

### å¦‚æœæ•°æ®é‡å¤ªå°‘ï¼Œå¯ä»¥ï¼š

**æ–¹æ¡ˆAï¼šåªä¿ç•™5ä¸ªå˜ä½“**ï¼ˆæ¨èï¼‰
```python
VARIANT_FUNCS = {
    "original": variant_original,
    "no_abstract": variant_no_abstract,
    "no_introduction": variant_no_introduction,
    "no_conclusion": variant_no_conclusion,      # 66%
    "no_experiments": variant_no_experiments,    # 59%
    # ç§»é™¤ no_methods (27%) å’Œ no_formulas (9%)
}
```
- é¢„æœŸæˆåŠŸç‡ï¼š~38%
- é¢„æœŸæ ·æœ¬æ•°ï¼š~8,000

**æ–¹æ¡ˆBï¼šå›åˆ°3ä¸ªé«˜æˆåŠŸç‡å˜ä½“**
```python
VARIANT_FUNCS = {
    "original": variant_original,
    "no_abstract": variant_no_abstract,
    "no_introduction": variant_no_introduction,
}
```
- å·²çŸ¥æˆåŠŸç‡ï¼š94%
- å·²çŸ¥æ ·æœ¬æ•°ï¼š11,838 âœ…

**æ–¹æ¡ˆCï¼šæ”¹ä¸ºå®½æ¾æ¨¡å¼**
```python
STRICT_MODE = False  # å…è®¸éƒ¨åˆ†å˜ä½“ç¼ºå¤±
```
- é¢„æœŸæ ·æœ¬æ•°ï¼š~17,700
- ä½†æ¯ç¯‡è®ºæ–‡å˜ä½“æ•°ä¸ä¸€è‡´

---

## ğŸ“ˆ è¿è¡ŒçŠ¶æ€

**æ­£åœ¨è¿è¡Œï¼š**
```bash
python scripts/generate_variant_dataset.py
```

**é¢„æœŸè€—æ—¶ï¼š**
- å¤„ç† 4,182 + 780 = 4,962 ç¯‡è®ºæ–‡
- æ¯ç¯‡çº¦ 0.1-0.5 ç§’
- æ€»è®¡ï¼šçº¦ 5-25 åˆ†é’Ÿ

**æŸ¥çœ‹ç»“æœï¼š**
```bash
# æŸ¥çœ‹ç”Ÿæˆçš„æ ·æœ¬æ•°
wc -l util/train_with_variants.jsonl
wc -l util/test_with_variants.jsonl

# è¯¦ç»†åˆ†æ
python diagnose_variants.py
```

---

## âœ… æ€»ç»“

**æ–°ç­–ç•¥ä¼˜åŠ¿ï¼š**
1. âœ… æ•°æ®è´¨é‡æ›´é«˜ï¼ˆ100%å®Œæ•´ï¼‰
2. âœ… æ•°æ®é‡æ›´å¤§ï¼ˆé¢„æœŸ 11,000+ æ ·æœ¬ï¼‰
3. âœ… æ›´ç¨³å®šå¯é ï¼ˆä¸¥æ ¼æ¨¡å¼ï¼‰
4. âœ… ä¸“æ³¨é«˜æˆåŠŸç‡å˜ä½“

**æƒè¡¡ï¼š**
- âš ï¸ åªæœ‰ 3 ç§å˜ä½“ï¼ˆè€Œä¸æ˜¯ 9 ç§ï¼‰
- âš ï¸ æ— æ³•ç ”ç©¶ conclusion/methods/experiments çš„å½±å“

**æœ€é€‚åˆï¼š**
- ç ”ç©¶ Abstract å’Œ Introduction çš„é‡è¦æ€§
- éœ€è¦é«˜è´¨é‡ä¸€è‡´çš„æ•°æ®é›†
- å¿«é€Ÿè·å¾—å¤§é‡å¯ç”¨æ•°æ®

