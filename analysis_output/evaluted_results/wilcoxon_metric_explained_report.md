# Wilcoxon Signed-Rank Test 指标说明与本实验结果解读

## 1. 这是什么指标（一句话）

**Wilcoxon signed-rank test（威尔科克森符号秩检验）**是一个用于比较“**同一对象在两种条件下**是否有稳定差异”的统计检验方法。  
在我们的实验里，“同一对象”是同一篇论文，“两种条件”是 `original` 和某个 `variant`。

---

## 2. 我们为什么用这个指标

我们的核心问题是：  
删除某个部分（如 methods、experiments）后，LLM 打分是否会**系统性变化**，而不是偶然波动。

为什么不用普通均值对比：
1. 评分差值不一定服从正态分布。
2. 数据是成对的（同一论文前后对比），应使用配对检验。
3. Wilcoxon 对异常值更稳健，适合这类审稿分数据。

---

## 3. 这个检验的“目的”到底是什么

对每个变体，它检验的本质是：

- 原假设 H0：`variant - original` 的总体中位数为 0（没有系统变化）
- 备择假设 H1：中位数不为 0（双侧检验）

如果 p 值很小（例如 < 0.05），表示“该变体与 original 的差异不太可能仅由随机波动造成”。

---

## 4. 计算方式（易懂版）

以某个变体（如 `no_methods`）为例：

1. 对每篇论文计算差值：  
`d_i = score(no_methods)_i - score(original)_i`
2. 去掉 `d_i = 0` 的样本（因为没有方向信息）。
3. 对 `|d_i|`（绝对差）做排序，得到秩。
4. 根据差值正负给秩加符号，分别累加正秩和与负秩和。
5. 得到检验统计量 `W` 和 p 值。

你可以把它理解为：  
“不仅看变没变，还看变化方向是否在多数样本上具有一致性”。

---

## 5. 我们输出文件里每一列是什么意思

文件：`wilcoxon_variant_vs_original.csv`

1. `variant_type`：变体名  
2. `n_pairs`：可配对样本数（有 original 且有该变体）  
3. `n_nonzero`：差值不为 0 的样本数（真正参与检验）  
4. `median_diff_variant_minus_original`：中位差（variant - original）  
5. `mean_diff_variant_minus_original`：均值差（variant - original）  
6. `rank_biserial_correlation`：效应量  
   - 负值：变体倾向降分  
   - 正值：变体倾向升分  
   - 绝对值越大，效果越强  
7. `wilcoxon_statistic`：检验统计量  
8. `p_value_raw`：原始 p 值  
9. `p_value_holm`：Holm 多重比较校正后的 p 值（更严格）  
10. `p_value_bh_fdr`：BH/FDR 校正后的 p 值（控制假发现率）

---

## 6. 为什么要做多重比较校正

我们不是只检验一个变体，而是同时检验了 5 个变体。  
如果不校正，出现“假阳性”（看起来显著但其实是运气）的概率会升高。

因此我们报告了：
1. Holm（偏保守）
2. BH/FDR（相对宽松）

当校正后依然显著，结论更可靠。

---

## 7. 本实验结果解读（基于你当前输出）

### 7.1 显著降分的变体（校正后仍显著）

1. `no_experiments`  
   - 中位差 `-0.25`，均值差 `-0.4125`  
   - 效应量 `-0.487`（较强负向）  
   - `p_holm=0.00156`，`p_bh=0.00156`  
   - 解释：去掉实验部分会明显降低评分。

2. `no_methods`  
   - 中位差 `-0.375`，均值差 `-0.335`  
   - 效应量 `-0.343`  
   - `p_holm=0.02306`，`p_bh=0.01256`  
   - 解释：去掉方法部分会显著降低评分。

3. `no_introduction`  
   - 中位差 `-0.375`，均值差 `-0.300`  
   - 效应量 `-0.330`  
   - `p_holm=0.02306`，`p_bh=0.01256`  
   - 解释：去掉引言也会显著降低评分。

### 7.2 不显著的变体

1. `no_conclusion`  
   - 中位差 `0`，均值差 `+0.105`，效应量 `+0.182`  
   - 校正后 p 值 > 0.05  
   - 解释：整体上没有证据表明该变体会稳定改变评分。

2. `no_abstract`  
   - 中位差 `0`，均值差 `+0.065`，效应量 `+0.078`  
   - 校正后 p 值 > 0.05  
   - 解释：整体上也没有显著变化。

---

## 8. 一句话总结实验发现

LLM 对 `methods / experiments / introduction` 的缺失有明显惩罚（显著降分），  
但对 `abstract / conclusion` 的缺失惩罚不稳定（未显著）。

---

## 9. 这个指标能回答什么、不能回答什么

能回答：
1. 某个变体是否相对 original 存在统计上显著的评分变化。
2. 变化方向（升分还是降分）与大致强度。

不能单独回答：
1. 为什么变化（因果机制）。  
2. 是否“公平”或“合理”（需结合人工评审标准）。  
3. 决策变化（Accept/Reject）是否同样显著（那需要对决策做额外统计）。

---

## 10. 给非统计背景读者的快速读法（30秒）

看每个变体三件事：
1. `p_value_holm` 是否 < 0.05（是否显著）
2. `median_diff` 是负还是正（方向）
3. `rank_biserial_correlation` 绝对值大小（强弱）

在本结果中，最关键结论就是：  
`no_experiments`, `no_methods`, `no_introduction` 都“显著且负向”，  
说明删掉这些核心部分会稳定拉低 LLM 评分。
